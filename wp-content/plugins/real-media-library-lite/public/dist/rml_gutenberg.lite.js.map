{"version":3,"file":"rml_gutenberg.lite.js","mappings":"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","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///external var \"React\"","webpack:///external var \"wp\"","webpack:///./src/public/ts/rml_gutenberg.jsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = React;","const __WEBPACK_NAMESPACE_OBJECT__ = wp;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/* global rmlOpts */\nimport React from \"react\";\nimport { blocks, components, element, editor, i18n } from \"wp\";\nconst BLOCK_ID = \"real-media-library/gallery\",\n      {\n  registerBlockType\n} = blocks,\n      {\n  G,\n  SVG,\n  Path,\n  ServerSideRender,\n  PanelBody,\n  RangeControl,\n  ToggleControl,\n  SelectControl,\n  TreeSelect,\n  Notice,\n  Spinner,\n  Button,\n  withNotices\n} = components,\n      {\n  Component,\n  Fragment\n} = element,\n      {\n  InspectorControls\n} = editor,\n      {\n  __\n} = i18n;\nconst linkOptions = [{\n  value: \"attachment\",\n  label: __(\"Attachment Page\")\n}, {\n  value: \"media\",\n  label: __(\"Media File\")\n}, {\n  value: \"none\",\n  label: __(\"None\")\n}];\n/**\n * Control to select a folder. You do not have to fill the items, it is\n * automatically filled and retrieved from the server.\n */\n\nclass SelectFolderControl extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      $busy: true,\n      tree: []\n    };\n  }\n  /**\n   * Load the RML tree.\n   */\n\n\n  async componentDidMount() {\n    const {\n      tree\n    } = await window.rml.request({\n      location: {\n        path: \"/tree\"\n      }\n    });\n    tree.unshift({\n      id: -1,\n      name: rmlOpts.others.lang.unorganized\n    });\n    tree.unshift({\n      id: undefined,\n      name: \"-\"\n    });\n    this.setState({\n      tree,\n      $busy: false\n    });\n  }\n\n  render() {\n    const { ...rest\n    } = this.props,\n          {\n      $busy,\n      tree\n    } = this.state;\n    return !$busy ? /*#__PURE__*/React.createElement(TreeSelect, _extends({\n      label: rmlOpts.others.lang.folder\n    }, rest, {\n      tree: tree\n    })) : /*#__PURE__*/React.createElement(Spinner, null);\n  }\n\n}\n/**\n * Gallery edit view with inspector controls like the normal gallery block.\n */\n\n\nclass GalleryEdit extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.setFid = fid => this.props.setAttributes({\n      fid: +fid\n    });\n\n    this.setLinkTo = linkTo => this.props.setAttributes({\n      linkTo\n    });\n\n    this.setColumnsNumber = columns => this.props.setAttributes({\n      columns\n    });\n\n    this.toggleImageCrop = () => this.props.setAttributes({\n      imageCrop: !this.props.attributes.imageCrop\n    });\n\n    this.toggleCaptions = () => this.props.setAttributes({\n      captions: !this.props.attributes.captions\n    });\n\n    this.handleReload = () => this.props.setAttributes({\n      lastEditReload: new Date().getTime()\n    });\n\n    this.render = () => {\n      // Collect data\n      const {\n        attributes\n      } = this.props,\n            {\n        fid,\n        columns = 3,\n        imageCrop,\n        captions,\n        linkTo\n      } = attributes;\n      return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(InspectorControls, null, /*#__PURE__*/React.createElement(PanelBody, {\n        title: __(\"Gallery Settings\")\n      }, /*#__PURE__*/React.createElement(SelectFolderControl, {\n        value: fid,\n        onChange: this.setFid\n      }), /*#__PURE__*/React.createElement(RangeControl, {\n        label: __(\"Columns\"),\n        value: columns,\n        onChange: this.setColumnsNumber,\n        min: \"1\",\n        max: \"8\"\n      }), /*#__PURE__*/React.createElement(ToggleControl, {\n        label: __(\"Crop Images\"),\n        checked: !!imageCrop,\n        onChange: this.toggleImageCrop\n      }), /*#__PURE__*/React.createElement(ToggleControl, {\n        label: __(\"Caption\"),\n        checked: !!captions,\n        onChange: this.toggleCaptions\n      }), /*#__PURE__*/React.createElement(SelectControl, {\n        label: __(\"Link To\"),\n        value: linkTo,\n        onChange: this.setLinkTo,\n        options: linkOptions\n      }), /*#__PURE__*/React.createElement(Button, {\n        isPrimary: true,\n        onClick: this.handleReload\n      }, rmlOpts.others.lang.reloadContent))), /*#__PURE__*/React.createElement(ServerSideRender, {\n        block: BLOCK_ID,\n        attributes: attributes\n      }), !fid && /*#__PURE__*/React.createElement(Notice, {\n        status: \"error\",\n        isDismissible: false\n      }, /*#__PURE__*/React.createElement(\"p\", null, rmlOpts.others.lang.gutenBergBlockSelect)));\n    };\n\n    this.state = {\n      refresh: new Date().getTime()\n    };\n  }\n\n}\n/**\n * @see https://github.com/WordPress/gutenberg/blob/master/packages/block-library/src/gallery/index.js\n */\n\n\nregisterBlockType(BLOCK_ID, {\n  title: \"Real Media Library Gallery\",\n  description: \"Display folder images in a rich gallery.\",\n  icon: /*#__PURE__*/React.createElement(SVG, {\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(Path, {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  }), /*#__PURE__*/React.createElement(G, null, /*#__PURE__*/React.createElement(Path, {\n    d: \"M20 4v12H8V4h12m0-2H8L6 4v12l2 2h12l2-2V4l-2-2z\"\n  }), /*#__PURE__*/React.createElement(Path, {\n    d: \"M12 12l1 2 3-3 3 4H9z\"\n  }), /*#__PURE__*/React.createElement(Path, {\n    d: \"M2 6v14l2 2h14v-2H4V6H2z\"\n  }))),\n  category: \"common\",\n  supports: {\n    align: true\n  },\n  attributes: {\n    fid: {\n      type: \"number\",\n      default: 0\n    },\n    columns: {\n      type: \"number\",\n      default: 3\n    },\n    imageCrop: {\n      type: \"boolean\",\n      default: true\n    },\n    captions: {\n      type: \"boolean\",\n      default: true\n    },\n    linkTo: {\n      type: \"string\",\n      default: \"none\"\n    },\n    lastEditReload: {\n      type: \"number\",\n      default: 0\n    }\n  },\n  edit: withNotices(GalleryEdit),\n\n  save() {\n    // Rendering in PHP, see general\\Gutenberg\n    return null;\n  }\n\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","React","wp","_extends","assign","target","i","arguments","length","source","apply","this","BLOCK_ID","registerBlockType","blocks","G","SVG","Path","ServerSideRender","PanelBody","RangeControl","ToggleControl","SelectControl","TreeSelect","Notice","Spinner","Button","withNotices","components","Component","Fragment","element","InspectorControls","editor","__","i18n","linkOptions","label","SelectFolderControl","constructor","super","state","$busy","tree","async","window","rml","request","location","path","unshift","id","name","rmlOpts","others","lang","unorganized","undefined","setState","render","rest","props","folder","title","description","icon","viewBox","xmlns","fill","category","supports","align","attributes","fid","type","default","columns","imageCrop","captions","linkTo","lastEditReload","edit","setFid","setAttributes","setLinkTo","setColumnsNumber","toggleImageCrop","toggleCaptions","handleReload","Date","getTime","onChange","min","max","checked","options","isPrimary","onClick","reloadContent","block","status","isDismissible","gutenBergBlockSelect","refresh","save"],"sourceRoot":""}